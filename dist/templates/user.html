<section ng-controller="UserCtrl" class="user">
  <button type="submit" class="user-links-container">
    <a ui-sref="landing" class="navbar-link">Back to main page</a>
  </button>
  <div class="clock">
    <p><b>Time now: {{time | date: 'fullDate'}} at {{time | date: 'mediumTime'}}</b></p>
  </div>
  <div class="panel panel-default">
    <ol class="list-group">
      <li ng-repeat="item in items | orderBy: '-rank'" class="list-group">
        <!-- edit a message -->
        <table class="table">
          <!-- .row -->
          <tr>
            <th>item name:</th>
            <th>date due:</th>
            <th>priority:</th>
            <th>urgency:</th>
            <th colspan="2">duration:</th>
            <th>rank:</th>
            <th>Active since:</th>
            <th colspan="6">Due in:</th>
          </tr>
            <td class="nameCell">
              <!-- .col-md-2 -->
              <div class="nameLine" ng-hide="nameEdit" ng-Mouseover="nameEdit=true" ng-Mouseleave="nameEdit=false">
                {{item.a_text}}
              </div>
              <input class="nameEditBox" type="inputText" ng-show="nameEdit" ng-Mouseover="nameEdit=true" ng-Mouseleave="nameEdit=false" ng-model="item.a_text" ng-change="items.$save(item)"/>
            </td>
            <td class="dateCell">
              <div class="dateLine" ng-hide="dateNum" ng-Mouseover="dateNum=true" ng-Mouseleave="dateNum=false">
                {{item.b_dueDate | date: 'M/d/yy h:mm a'}}
              </div>
              <input class="dateEditBox" type="datetime-local" ng-show="dateNum" ng-Mouseover="dateNum=true" ng-Mouseleave="dateNum=false" placeholder="yyyy-MM-ddTHH:mm:ss" ng-model="item.b_dueDate" ng-change="items.$save(item)"/>
            </td>
            <td class="importanceCell">
              <div class="importanceLine" ng-hide="impSelect" ng-Mouseover="impSelect=true" ng-Mouseleave="impSelect=false">
                {{item.p_importance.repeatSelect}}
              </div>
              <select class="importanceEditBox" id="repeatSelect" ng-model="newImportanceTxt.repeatSelect" ng-change="items.$save(item)" ng-show="impSelect" ng-Mouseover="impSelect=true" ng-Mouseleave="impSelect=false"><option ng-repeat="option in newImportanceTxt.availableOptions" value="{{option.text}}">{{option.text}}</option></select>
            </td>
            <td class="urgentCell">
              <div class="urgentLine" ng-hide="urgentEdit" ng-Mouseover="urgentEdit=true" ng-Mouseleave="urgentEdit=false">
                {{item.r_urgent}}
              </div>
              <input class="urgentEditBox" type="inputText" ng-show="urgentEdit" ng-Mouseover="urgentEdit=true" ng-Mouseleave="urgentEdit=false" ng-model="item.r_urgent" ng-change="items.$save(item)" />
            </td>
            <td class="numberCell">
              <div class="numberLine" ng-hide="hourEdit" ng-Mouseover="hourEdit=true" ng-Mouseleave="hourEdit=false">
                {{item.o_timeToFinishDate | date: 'H'}}
              </div>
              <input class="numberEditBox" type="number" ng-model="item.m_hoursToFinish"  ng-change="items.$save(item)" ng-show="hourEdit" ng-Mouseover="hourEdit=true" ng-Mouseleave="hourEdit=false"/>
            </td>
            <td class="numberCell">
              <div class="numberLine" ng-hide="minuteEdit" ng-Mouseover="minuteEdit=true" ng-Mouseleave="minuteEdit=false">
                {{item.o_timeToFinishDate | date: 'm'}}
              </div>
              <input class="numberEditBox" type="number" ng-model="item.n_minutesToFinish"  ng-change="items.$save(item)" ng-show="minuteEdit" ng-Mouseover="minuteEdit=true" ng-Mouseleave="minuteEdit=false"/>
            </td>
            <td class="rankCell">
              {{item.s_rank}}
            </td>
            <td class="createdAtCell">
              {{item.t_created_at | date: 'M/d/yy h:mm a'}}
            </td>
            <td class="dueCell">Yr: {{parseTime(item.b_dueDate).year}}</td>
            <td class="dueCell">Mo: {{parseTime(item.b_dueDate).month}}</td>
            <td class="dueCell">Ds: {{parseTime(item.b_dueDate).day}}</td>
            <td class="dueCell">Hs: {{parseTime(item.b_dueDate).hour}}</td>
            <td class="dueCell">Ms: {{parseTime(item.b_dueDate).minute}}</td>
            <td class="dueCell">S: {{parseTime(item.b_dueDate).second}}</td>
          </tr>
          <tr>
              <td>
                <button ng-click="items.$remove(item)">Delete item</button>
              </td>
          </tr>
        </table>
              <!-- <div id="chart-1" style="height: 300px;"></div> -->

        </li>
      </ol>
        __________________________________________________________________________________________
        <!-- push a new message onto the array -->
      <form ng-submit="addItem()" class="form">
        <table>
          <tr>
            <td>Enter item name:</td>
            <td><input ng-model="newItemName" class="nameBox"/></td>
          </tr>
          <tr>
            <td>Enter due date and time:</td>
            <td><input type="datetime-local" ng-model="newDueDate" placeholder="e.g, 2016-05-01; 5:15:40 PM" class="dateBox add"/>
          </tr>
          <tr>
            <td>Enter est. time to finish:</td>
            <td><input type="number" ng-model="newHourEst" min="0" max="12" class="numberBox"/> hours and <input type="number" ng-model="newMinuteEst" min="0" max="59" class="numberBox"/> minutes </td>
          </tr>
          <tr>
            <td>Enter priority:</td>
            <td><select id="repeatSelect" ng-model="newImportanceTxt.repeatSelect" class="importanceBox">
              <option ng-repeat="option in newImportanceTxt.availableOptions" value="{{option.text}}">{{option.text}}</option></select></td>
          </tr>
          <tr>
            <td></td>
            <td><button type="submit" class="addButton">Add to-do item</button></td>
          </tr>
        </table>
      </form>
    </div>
</section>
