<section ng-controller="UserCtrl" class="user">
    <button type="submit" class="user-links-container">
        <a ui-sref="landing" class="navbar-link">Back to main page</a>
    </button>
    <div class="clock">
        <p><b>Time now: {{time | date: 'fullDate'}} at {{time | date: 'mediumTime'}}</b></p>
    </div>
    <div class="formAndButtonContainer">
        <ol>
            <li ng-repeat="item in items | orderBy: '-rank'" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()" class="itemsList">
            <!-- edit a message -->
              <table>
                  <tr>
                      <!-- <td> -->
                          <b><div click-to-edit-text type="inputText" ng-model="item.a_text" ng-change="items.$save(item)"></div></b> | due on <b>{{item.b_dueDateObj | date: 'fullDate'}}</b> at <b>{{item.c_dueTimeObj | date: 'shortTime'}}</b> | It is <b>{{item.p_importance.repeatSelect}}</b> and <b>{{item.r_urgent}}</b><br>
                      <!-- </td> -->
                      <!-- <td> -->
                          E.T.C: <b>{{item.o_timeToFinishObj | date: 'H'}}</b> hours and <b>{{item.o_timeToFinishObj | date: 'm'}}</b> minutes to finish | Rank: <b>{{item.s_rank}}</b> | Active since <b>{{item.t_created_at | date: 'fullDate'}}, {{item.t_created_at | date: 'shortTime'}}</b><br>
                      <!-- </td> -->
                      <!-- <td> -->
                          This item is due in<br><b>yrs: {{item.g_yearsTillDue}}<br> mths: {{item.h_monthsTillDue}}<br>ds: {{item.i_daysTillDue}}<br>hrs:  {{item.j_hoursTillDue}}<br>mins: {{item.k_minutesTillDue}}<br>secs: {{item.l_secondsTillDue}}</b><br>
                      <!-- </td> -->
                  </tr>
                  <tr>
                      <!-- <td> -->

                          <!--The <input> expression below was substituted by one (above) that works-->
                          <!-- <input ng-model="item.text" ng-change="items.$save(item)" /> -->

                          <!--The <input> expression below was substituted by one (above) that DOES not work, so: don't erase-->
                          <!-- <input ng-model="item.b_dueDate" type="date" ng-change="items.$save(item)"/> at <input ng-model="item.b_dueDate" type="time" ng-change="items.$save(item)"/> -->
                          <div click-to-edit-date type="date" ng-model="item.b_dueDateObj"  ng-change="items.$save(item).then(function(){updateDueTiming(item.b_dueDateObj)})"></div> at <div click-to-edit-time type="time" ng-model="item.c_dueTimeObj"  ng-change="items.$save(item)"></div>
                          <input ng-model="item.p_importance.repeatSelect" ng-change="items.$save(item)" />
                      <!-- </td> -->
                      <!-- <td> -->
                          <div click-to-edit-number type="number" ng-model="item.m_hoursToFinish"  ng-change="items.$save(item)" class="numberBox"/>
                          <div click-to-edit-number type="number" ng-model="item.n_minutesToFinish"  ng-change="items.$save(item)" class="numberBox"/>
                      <!-- </td> -->
                      <!-- <td> -->
                          <input ng-model="item.r_urgent" ng-change="items.$save(item)" />
                          <button ng-click="items.$remove(item)">Delete item</button>
                      <!-- </td> -->
                  </tr>
              </table>
              __________________________________________________________________________________________
            </li>
        </ol>
        <!-- push a new message onto the array -->
        <form ng-submit="addItem()" class="form">
            <table>
                <tr>
                    <td>Enter item name:</td>
                    <td><input ng-model="newItemName" class="nameBox"/></td>
                </tr>
                <tr>
                    <td>Enter due date and time:</td>
                    <td><input type="date" ng-model="newDueDate" placeholder="2016-01-01" class="dateBox"/> <input type="time" ng-model="newDueTime" placeholder="01:01:00 pm" class="timeBox"/></td>
                </tr>
                <tr>
                    <td>Enter est. time to finish:</td>
                    <td><input type="number" ng-model="newHourEst" min="0" max="12" class="numberBox"/> hours and <input type="number" ng-model="newMinuteEst" min="0" max="59" class="numberBox"/> minutes </td>
                </tr>
                <tr>
                    <td>Enter priority:</td>
                    <td><select id="repeatSelect" ng-model="newImportanceTxt.repeatSelect">
                    <option ng-repeat="option in newImportanceTxt.availableOptions" value="{{option.text}}">{{option.text}}</option></select></td>
                </tr>
                <tr>
                    <td><button type="submit" class="addButton">Add to-do item</button></td>
                </tr>
            </table>
        </form>
    </div>
</section>
